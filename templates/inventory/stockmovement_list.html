{% extends 'base.html' %}
{% block title %}Stock Movements - SnackHub{% endblock %}

{% block content %}
  <h2>Stock Movements</h2>
  <a href="{% url 'inventory:stockmovement_create' %}" class="btn btn-primary mb-3">Add Stock Movement</a>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Timestamp</th>
        <th>Product</th>
        <th>Location</th>
        <th>Type</th>
        <th>Quantity</th>
        <th>Reference</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody>
      {% for movement in movements %}
      <tr>
        <td>{{ movement.timestamp|date:"Y-m-d H:i" }}</td>
        <td>{{ movement.product.name }}</td>
        <td>{{ movement.location.name }}</td>
        <td>{{ movement.get_movement_type_display }}</td>
        <td>{{ movement.quantity }}</td>
        <td>{{ movement.reference }}</td>
        <td>{{ movement.notes }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if is_paginated %}
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}" tabindex="-1">Previous</a>
      </li>
      {% endif %}
      {% for num in paginator.page_range %}
      <li class="page-item {% if page_obj.number == num %}active{% endif %}">
        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
      </li>
      {% endfor %}
      {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
      </li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
{% endblock %}
